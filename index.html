<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>The Speaker</title>
      <style>
         body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
         .container { background: #f5f5f5; padding: 20px; border-radius: 8px; }
         input, button { padding: 10px; margin: 5px; font-size: 16px; }
         .result { margin: 20px 0; padding: 15px; background: white; border-radius: 5px; }
      </style>
      <script>
         const API_KEY = ''; // Obtain from console.x.ai
         const API_URL = 'https://api.x.ai/v1/chat/completions';
         
         async function grokRequest(prompt) {
         	const response = await fetch(API_URL, {
                           method: 'POST',
                           headers: {
         				'Content-Type': 'application/json',
                               'Authorization': 'Bearer ' + API_KEY
                           },
                           body: JSON.stringify({
         				messages: [
                                   { role: 'system', content: 'You are a test assistant.' },
                                   { role: 'user', content: prompt }
                               ],
         				model: "grok-3-latest",
                               stream: false,
         				temperature: 0
                           })
                       });
         
         	const data = await response.json();
         	
         	if (data.choices && data.choices.length > 0) {
         		return '' + data.choices[0].message.content;
         	}
         	
         	alert(JSON.stringify(data));
         	
         	return 'No response from Grok';
         }
         
         const synth = window.speechSynthesis;
         
         let voices;
         
         function loadVoices() {
         	voices = synth.getVoices();
         }
         
         // in Google Chrome the voices are not ready on page load
         if ("onvoiceschanged" in synth) {
         	synth.onvoiceschanged = loadVoices;
         } else {
         	loadVoices();
         }
         
         function speakResult(text) {            
			const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 0.9;
            speechSynthesis.speak(utterance);
		 }
         
         function speak() {
         	speakResult(document.getElementById('toSpeak').value);
         }
         
         async function question() {
         	speakResult(await grokRequest('Testing. ' + document.getElementById('toSpeak').value));
         }
         
         async function work() {
         	speakResult(await grokRequest('Testing. Please see the work resume - ' + document.getElementById('toSpeak').value));
         }
      </script>
   </head>
   <body>
      <textarea id="toSpeak" rows="10" cols="120"></textarea>
      <br>
      <input type="button" value="Hi" onclick="speak();">
      <br>
      <input type="button" value="Question me?" onclick="question();">
      <br>
      <input type="button" value="Work?" onclick="work();">
   </body>
</html>
